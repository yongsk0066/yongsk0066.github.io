---
import { getCollection } from "astro:content";
import FormattedDate from "./FormattedDate.astro";

const questions = (await getCollection("question")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<style>
  section {
    margin-bottom: 2rem;
  }
  ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  li {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    list-style: square;
  }
  p {
    margin: 0;
  }
  h4 {
    margin: 0;
  }
  .subTitle {
    font-size: 1rem;
    margin-bottom: 1rem;
  }

  .date {
    margin-left: auto;
  }
  .content {
    display: flex;
    flex-direction: column;
  }
  .title {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .description {
    font-size: 1rem;
    color: var(--color-text-secondary);
  }
  .tag {
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
    font-size: 0.75rem;
    text-transform: uppercase;
    display: inline-block;
  }

  .tag.green {
    background-color: var(--tag-background-green);
    color: var(--tag-color-green);
  }
  .tag.blue {
    background-color: var(--tag-background-blue);
    color: var(--tag-color-blue);
  }
</style>
<section>
  {
    questions.length > 0 && (
      <div>
        <h4>내가 궁금한 것들</h4>
        <p class="subTitle">
          머리 속을 잠시라도 머물다간 질문들을 남겨놓는 곳 입니다. 언젠가는 다
          해결할 수 있겠죠?
        </p>
        <ul>
          {questions.map((question) => (
            <li>
              <div class="content">
                <div class="title">
                  <span>{question.data.title}</span>
                  <div
                    class:list={[
                      "tag",
                      question.data.isSolved ? "green" : "blue",
                    ]}
                  >
                    {question.data.isSolved ? "Solved" : "Not Solved"}
                  </div>
                </div>
                <p class="description">{question.data.description}</p>
              </div>
              <span class="date">
                <FormattedDate date={question.data.pubDate} />
              </span>
            </li>
          ))}
        </ul>
      </div>
    )
  }
</section>
